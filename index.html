<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indovina Numero Magico</title>
</head>
<body>


    <h1>Guess the Number</h1>

    <p>Ho generato un numero...prova ad indovinarlo
        <br>
        Hai ancora 5 tentativi
    </p>

    <form action="" method="get">
        <input id="prova" type="number" name="user_guess" value="200">
        <input id="button" type="button" name="guess" value="Indovina">
    </form>



    <!--     ...     -->



    <script type="text/javascript">

    //1.  dichiaro una variabile e con un queryselector memorizzo il button
    //2.  dichiaro un EVENT LISTENER sul button

    let button =document.querySelector("#button")  //la funzione QUERYSELECTOR ci permette di prendere un elemento html e, tramite un SELETTORE CSS, operare nello script su una variabile


    button.addEventListener("click",function(event){   //"ascoltando gli eventi" al click eseguo la funzione
        console.log(event)  //funzione eseguita solo dopo che l'utente clicca su Button
        //1. prendo l'elemento html di cui l'utente ha scritto il numero
        //2. trasformo in intero il numero
        //3. controllo i valori
        //4. scrivo i risultati in console
    })

    let risp=document.querySelector("#prova").value
    console.log(risp)
    risp=parseInt(risp)
    


    //FUNZIONI

    //versione di generazione n°1

        let casualNumber=0
        function generateRandomInteger(min, max) {   //applico i parametri 0 e 100 (qui 1 è escluso)
            casualNumber = Math.random()
            casualNumber = casualNumber * max +1  //moltiplichiamo per max in modo da ottenere il valore generato compreso fra 1 e 100
            casualNumber = parseInt(casualNumber)   ///trasformo il numero (stringa) in intero
            return casualNumber
        }
/*






    //versione di generazione n°2


        let casualNumber=0
        function generateRandomInteger(min, max) {
            casualNumber = Math.random()
            casualNumber = casualNumber * (max-min+1)+min //così facendo, in base all'intervallo di valori che vogliamo generare, motliplichiamo quest'ultimo per il numero generato, infine sommiamo il minimo per farlo rientrare nell'intervallo desiderato. Qui includo i valori
            casualNumber = parseInt(casualNumber)
            return casualNumber
        }
   
        function sanitize(n){
            while(n===null || isNaN(n) || n===""){   
                n=prompt("Inserire necessariamente un numero. ")
            }
            //inserire un campo vuoto equivarrà ad un errore
            return n.trim()
        }
        


        casualNumber=generateRandomInteger(0,100)   //chiamo la funzione di generazione del numero casuale mettendo come parametri i valori di massimo e di minimo

        let giusto=false


        for(let i=0;i<5 && giusto===false;i++){   //condizione di ripetitibilità dei tentativi 

            let answer=prompt("Fai un tentativo, inserisci il numero compreso fra 0 e 100 (esclusi). Hai "+(5-i)+" tentativi rimanenti. " +casualNumber)
            

            sanitize(answer)   //richiamo la funzione di controllo dell'imput dell'utente
            answer=parseInt(answer)  //trasformo la risposta in intero per le selezioni seguenti



            //condizioni di uguaglianza/disuguaglianza del numero 

            if(answer===casualNumber){    //numero uguale (indovinato)
                console.log("Bravo, hai indovinato al "+(i+1)+"° tentativo. ")
                giusto=true
            }
            else{
                if(answer>casualNumber){   //numero maggiore
                    console.log("Valore troppo grande. Hai "+(5-i)+" tentativi rimanenti. ")
                }
                else{      //numero minore
                    console.log("Valore troppo piccolo. Hai "+(5-i)+" tentativi rimanenti. ")
                }
            }
        }

        //messaggio conclusivo
        if(giusto===false){
            console.log("Tentativi esauriti, non sei riuscito ad indovinare il numero misterioso. ("+casualNumber+"). ")
        }
        else{
            console.log("Gioco completato. ")
        }
    */
    </script>
</body>
</html>